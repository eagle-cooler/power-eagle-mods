"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.touch = touch;
exports.touchJson = touchJson;
var _fs = _interopRequireDefault(require("fs"));
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }
/**
 * Creates an empty file or updates the access and modification times of an existing file
 * @param {string} filepath - Path to the file to touch
 * @param {string} [fileContent] - Content to write to the file if it doesn't exist
 * @return {Promise} Resolves when file is touched, rejects on error
 */
function touch(filepath) {
  var fileContent = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';
  return new Promise(function (resolve, reject) {
    var time = new Date();
    _fs["default"].utimes(filepath, time, time, function (err) {
      if (err) {
        // If file doesn't exist, create it
        if (err.code === 'ENOENT') {
          _fs["default"].writeFile(filepath, fileContent, function (err) {
            if (err) reject(err);else resolve();
          });
        } else {
          reject(err);
        }
      } else {
        resolve();
      }
    });
  });
}

/**
 * Creates an empty file or updates the access and modification times of an existing file
 * @param {string} filepath - Path to the file to touch
 * @param {object} jsonContent - JSON content to write to the file if it doesn't exist
 * @return {Promise} Resolves when file is touched, rejects on error
 */
function touchJson(filepath) {
  var jsonContent = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  return touch(filepath, JSON.stringify(jsonContent, null, 2));
}